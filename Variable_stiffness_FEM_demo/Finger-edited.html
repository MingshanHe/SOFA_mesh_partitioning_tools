<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head>



<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>SofaPython Actuator Demo</title></head><body>
<h1>Python API Example : 'Finger-edited.pyscn'</h1>
<br>
This is a hack of the SoftRobots demo 'Finger.pyscn'. It depends only on the SofaPython plugin, annd not the SoftRobots plugin.
<br>
<h2>Usage</h2>
<dl>
    <dt>Use the Sofa Gui (SOFA_BUILD_DIR/bin/runSofa) to open 'Finger-edited.pyscn'.</dt>
        <dd>This should open a scene with a FEM soft robot finger, and wire 'stiffSpringForcefield' actuator'.</dd>
    <dt>Animate</dt>
        <dd>Press animate to run the scene. You can interact with the finger by shift-left-click to pull on it.</dd>
    <dt>Actuate</dt>
        <dd>Use the keyboard to 'actuate' the finger. Note it doesn't actually move because the rest lengths are not being changed in this demo.</dd>

        <dl>Control keys

        <dt>Ctrl-Shift-any-key</dt>
            <dd>The console will print whick key you pressed. NB Ctrl-N/O/R/S are 'new scene', 'open scene', 'reload' and 'save'.</dd>

        <dt>Ctrl-UpArrow</dt>
            <dd>'Stiffen' the FEM. Sets the Yong's Modulus to 180000. You will notice how musch stiffer the finger becomes.</dd>
        
        <dt>Ctrl-DownArrow</dt>
            <dd>'Soften' the FEM. Sets the Yong's Modulus to 18000. You will notice how musch softer the finger becomes.</dd>
        
        <dt>Ctrl-M</dt>
            <dd>'localStiffnessFactor' of the FEM. This prints the list of per-element multipliers of the Young's Modulus. By default none are set. You can view and edit them in the scene graph in the runSofa gui.</dd>
        
        <dt>Ctrl-Shift-Plus</dt>
            <dd>'heating' the wire. This adds 100 to the Young's Modulus of each spring in the chain.</dd>
        
        <dt>Ctrl-Minus</dt>
            <dd>'cooling' the wire. This subtracts 100 from the Young's Modulus of each spring in the chain.</dd>
        </dl>
    </dl>
<br>

<h2>Notes</h2>
<h3>What is demonstrated</h3>
The scene is generated by python code in Finger-edited.pyscn, and interaction is controlled by two Python Script Controller classes in controller/FingerControllerVisitorTest.py . The code demonstrates how to access and edit the model data in a running simulation.
<h3>What needs to be done</h3>
We need to implement Sofa 'visitor's in either C++ or Python that update model parameterrs at each time step. These would apply (1) the heating due to electrical power, and (2) the change in Young's modulus due to tenperature induced phase change of the SMA. The Sofa FEM Diffusion class would be used to model the transport of heat away from the SMA. 
<br><br>
We need to build some actuator and joint geometries, and scenes using these to match the SMA test rigs.
<br><br>
Helical and foil SMAs can be modeled as FEM structures, and their elements' Young's modulus adjusted individually using the 'localStiffnessFactor' attribute.
<h3>References</h3>
Our <a href="https://confluence.csiro.au/display/AIM/Sofa+Python+API">Confluence page</a> on the Sofa Python API.
<br>
Our <a href="https://confluence.csiro.au/display/AIM/TetrahedronFEMForceField+class">Confluence page</a> on the Sofa TetrahedronFEMForceField class.
<br>
More documentation can be found in <a href="../doc/SofaPython.pdf">../doc/SofaPython.pdf</a>
<br>
</body></html>
